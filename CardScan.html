<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hệ thống Thẻ An Toàn Điện Điện Tử - Tavietnam</title>
    <style>
        :root {
            --primary-blue: #1a73e8;
            --safety-yellow: #FFD700;
            --danger-red: #d93025;
            --text-dark: #202124;
            --bg-gray: #f1f3f4;
        }
        body { font-family: 'Segoe UI', Arial, sans-serif; background: var(--bg-gray); margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        
        /* Form tìm kiếm */
        .search-container { max-width: 500px; width: 100%; background: white; padding: 25px; border-radius: 20px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); margin-bottom: 30px; }
        .search-container h2 { font-size: 18px; color: var(--primary-blue); text-align: center; margin-top: 0; text-transform: uppercase; }
        input { width: 100%; padding: 14px; border: 2px solid #ddd; border-radius: 10px; font-size: 18px; text-align: center; box-sizing: border-box; outline: none; transition: 0.3s; }
        input:focus { border-color: var(--primary-blue); }
        .btn-check { width: 100%; padding: 14px; background: var(--primary-blue); color: white; border: none; border-radius: 10px; font-weight: bold; margin-top: 15px; cursor: pointer; font-size: 16px; }

        /* Kết quả tra cứu */
        #result-area { display: none; width: 100%; max-width: 500px; animation: slideUp 0.5s ease; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .section-title { font-size: 14px; font-weight: bold; color: #5f6368; margin: 20px 0 10px 5px; text-transform: uppercase; display: flex; align-items: center; }
        .section-title::before { content: ""; width: 4px; height: 15px; background: var(--primary-blue); margin-right: 8px; border-radius: 2px; }

        /* Mẫu thẻ màu vàng */
        .card-side {
            background-color: var(--safety-yellow);
            border: 2px solid #000;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            color: #000;
        }
        .card-header { text-align: center; border-bottom: 1.5px solid #000; padding-bottom: 10px; margin-bottom: 15px; }
        .card-header h3 { margin: 0; font-size: 17px; color: var(--danger-red); }
        
        .card-content { display: flex; gap: 20px; }
        .photo-box { width: 110px; height: 140px; border: 1.5px solid #000; background: #fff; }
        .photo-box img { width: 100%; height: 100%; object-fit: cover; }
        .details { flex: 1; font-size: 14px; line-height: 1.6; }

        /* Thông tin huấn luyện */
        .training-info { background: white; border-radius: 12px; padding: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); border-left: 5px solid var(--primary-blue); }
        .t-row { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #f0f0f0; font-size: 14px; }
        .t-label { color: #70757a; }
        .t-value { font-weight: 600; color: var(--text-dark); text-align: right; }

        .qr-footer { display: flex; justify-content: space-between; align-items: flex-end; margin-top: 15px; }
        .qr-code { width: 80px; height: 80px; border: 1px solid #000; background: #fff; padding: 2px; }
    </style>
</head>
<body>

<div class="search-container">
    <h2>Tra cứu An toàn điện</h2>
    <input type="tel" id="cccdInput" placeholder="Nhập 12 số CCCD" maxlength="12">
    <button class="btn-check" onclick="processCheck()">KIỂM TRA HỆ THỐNG</button>
</div>

<div id="result-area">
    <div class="section-title">Mặt trước thẻ</div>
    <div class="card-side">
        <div class="card-header">
            <h3>THẺ AN TOÀN ĐIỆN</h3>
            <p style="margin:2px 0; font-size:11px; font-weight:bold;">Nghị định 62/2025/NĐ-CP</p>
        </div>
        <div class="card-content">
            <div class="photo-box"><img id="resPhoto" src=""></div>
            <div class="details">
                Họ tên: <b id="resName" style="text-transform: uppercase;">-</b><br>
                Số CCCD: <b id="resID">-</b><br>
                Bậc an toàn: <b id="resLevel" style="color:var(--danger-red); font-size:18px;">-</b><br>
                Vị trí: <b>Nhân viên kỹ thuật điện</b><br>
                Đơn vị: <b>TAVIETNAM GROUP</b>
            </div>
        </div>
    </div>

    <div class="section-title">Mặt sau thẻ</div>
    <div class="card-side">
        <div style="text-align: center; font-weight:bold; border-bottom:1px solid #000; padding-bottom:5px; margin-bottom:10px;">XÁC NHẬN CỦA ĐƠN VỊ CẤP</div>
        <p style="font-size:12px; font-style:italic;">Thẻ này có giá trị chứng nhận người lao động đã được huấn luyện và sát hạch an toàn điện theo đúng quy định pháp luật.</p>
        <div class="qr-footer">
            <div style="font-size:12px; font-weight:bold;">
                <p style="margin:0">ĐẠI DIỆN ĐƠN VỊ CẤP THẺ</p>
                <p style="margin:30px 0 0 0; color:blue; font-family:'Courier New'">SIGNED: DIGITAL_BY_TAVIETNAM</p>
            </div>
            <img id="resQR" class="qr-code" src="">
        </div>
    </div>

    <div class="section-title">Chi tiết lịch sử huấn luyện</div>
    <div class="training-info">
        <div class="t-row">
            <span class="t-label">Đơn vị huấn luyện</span>
            <span class="t-value" id="resOrg">Trung tâm Đào tạo An toàn Tavietnam</span>
        </div>
        <div class="t-row">
            <span class="t-label">Giảng viên phụ trách</span>
            <span class="t-value" id="resTrainer">ThS. Nguyễn Văn Thành</span>
        </div>
        <div class="t-row">
            <span class="t-label">Ngày huấn luyện gần nhất</span>
            <span class="t-value" id="resDate">18/12/2025</span>
        </div>
        <div class="t-row">
            <span class="t-label">Điểm kiểm tra sát hạch</span>
            <span class="t-value" id="resScore" style="color:var(--success-color); font-size:16px;">95/100 (ĐẠT)</span>
        </div>
        <div class="t-row" style="border:none;">
            <span class="t-label">Ngày huấn luyện kế tiếp</span>
            <span class="t-value" id="resNextDate" style="color:var(--danger-red);">18/12/2026</span>
        </div>
    </div>
    
    <p style="text-align:center; font-size:11px; color:#888; margin:20px 0;">Dữ liệu được trích xuất từ Project: tavietnam-78ae8</p>
</div>

<script>
    const validProvinces = ["001", "002", "004", "006", "008", "010", "011", "012", "014", "015", "017", "019", "020", "022", "024", "025", "026", "027", "030", "031", "033", "034", "035", "036", "037", "038", "040", "042", "044", "045", "046", "048", "049", "051", "052", "054", "056", "058", "060", "062", "064", "066", "067", "068", "070", "072", "074", "075", "077", "079", "080", "082", "083", "084", "086", "087", "089", "091", "092", "093", "094", "095", "096"];

    // DB Mockup với dữ liệu huấn luyện chi tiết
    const db = {
        "001095001234": {
            name: "Nguyễn Văn An", level: "4/5", photo: "https://i.pravatar.cc/150?u=an",
            org: "Công ty TNHH Huấn luyện Tavietnam", trainer: "ThS. Trần Quốc Tuấn",
            date: "15/10/2025", score: "90/100 (ĐẠT)", next: "15/10/2026"
        },
        "079302005678": {
            name: "Lê Thị Bình", level: "3/5", photo: "https://i.pravatar.cc/150?u=binh",
            org: "Hội kỹ thuật Điện lực Việt Nam", trainer: "KS. Phạm Minh Đức",
            date: "01/12/2025", score: "85/100 (ĐẠT)", next: "01/12/2026"
        }
    };

    function processCheck() {
        const cccd = document.getElementById('cccdInput').value;
        const resultArea = document.getElementById('result-area');

        // Validation logic
        if (cccd.length !== 12) { alert("Vui lòng nhập đúng 12 số CCCD."); return; }
        if (!validProvinces.includes(cccd.substring(0,3))) { alert("Mã tỉnh không hợp lệ."); return; }
        
        const gender = parseInt(cccd.charAt(3));
        const birthYear = (gender < 2 ? 1900 : 2000) + parseInt(cccd.substring(4,6));
        const age = 2025 - birthYear;
        if (age < 18 || age > 80) { alert(`Nhân sự ${age} tuổi không đủ điều kiện cấp thẻ.`); return; }

        // Hiển thị kết quả
        const user = db[cccd];
        if (user) {
            document.getElementById('resName').innerText = user.name;
            document.getElementById('resID').innerText = cccd;
            document.getElementById('resLevel').innerText = user.level;
            document.getElementById('resPhoto').src = user.photo;
            document.getElementById('resQR').src = `https://api.qrserver.com/v1/create-qr-code/?size=80x80&data=VERIFIED_${cccd}`;
            
            // Cập nhật bảng huấn luyện
            document.getElementById('resOrg').innerText = user.org;
            document.getElementById('resTrainer').innerText = user.trainer;
            document.getElementById('resDate').innerText = user.date;
            document.getElementById('resScore').innerText = user.score;
            document.getElementById('resNextDate').innerText = user.next;

            resultArea.style.display = 'block';
            window.scrollTo({ top: resultArea.offsetTop, behavior: 'smooth' });
        } else {
            alert("Không tìm thấy hồ sơ cho CCCD này trên hệ thống.");
            resultArea.style.display = 'none';
        }
    }
</script>
</body>
</html>
